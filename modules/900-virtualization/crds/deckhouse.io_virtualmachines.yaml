---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.9.0
  creationTimestamp: null
  name: virtualmachines.deckhouse.io
spec:
  group: deckhouse.io
  names:
    kind: VirtualMachine
    listKind: VirtualMachineList
    plural: virtualmachines
    shortNames:
    - vm
    - vms
    singular: virtualmachine
  scope: Namespaced
  versions:
  - name: v1alpha1
    schema:
      openAPIV3Schema:
        description: VirtualMachine is the Schema for the virtualmachines API
        properties:
          apiVersion:
            description: 'APIVersion defines the versioned schema of this representation
              of an object. Servers should convert recognized schemas to the latest
              internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
            type: string
          kind:
            description: 'Kind is a string value representing the REST resource this
              object represents. Servers may infer this from the endpoint the client
              submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
            type: string
          metadata:
            type: object
          spec:
            description: VirtualMachineSpec defines the desired state of VirtualMachine
            properties:
              bootDisk:
                description: Represents the source of a boot disk Only one of its
                  members may be specified.
                properties:
                  bus:
                    description: 'Bus indicates the type of disk device to emulate.
                      supported values: virtio, sata, scsi, usb.'
                    type: string
                  ephemeral:
                    description: Should boot disk be removed with VM
                    type: boolean
                  hotpluggable:
                    description: Hotpluggable indicates whether the volume can be
                      hotplugged and hotunplugged.
                    type: boolean
                  size:
                    anyOf:
                    - type: integer
                    - type: string
                    description: Type represents the size for newly created disk
                    pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                    x-kubernetes-int-or-string: true
                  source:
                    description: TypedLocalObjectReference contains enough information
                      to let you locate the typed referenced object inside the same
                      namespace.
                    properties:
                      apiGroup:
                        description: APIGroup is the group for the resource being
                          referenced. If APIGroup is not specified, the specified
                          Kind must be in the core API group. For any other third-party
                          types, APIGroup is required.
                        type: string
                      kind:
                        description: Kind is the type of resource being referenced
                        type: string
                      name:
                        description: Name is the name of resource being referenced
                        type: string
                    required:
                    - kind
                    - name
                    type: object
                  storageClassName:
                    description: Type represents the type for newly created disk
                    type: string
                required:
                - size
                - source
                type: object
              cloudInit:
                description: 'Represents a cloud-init nocloud user data source. More
                  info: http://cloudinit.readthedocs.io/en/latest/topics/datasources/nocloud.html'
                properties:
                  networkData:
                    description: NetworkData contains NoCloud inline cloud-init networkdata.
                    type: string
                  networkDataBase64:
                    description: NetworkDataBase64 contains NoCloud cloud-init networkdata
                      as a base64 encoded string.
                    type: string
                  networkDataSecretRef:
                    description: NetworkDataSecretRef references a k8s secret that
                      contains NoCloud networkdata.
                    properties:
                      name:
                        description: 'Name of the referent. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                          TODO: Add other useful fields. apiVersion, kind, uid?'
                        type: string
                    type: object
                  secretRef:
                    description: UserDataSecretRef references a k8s secret that contains
                      NoCloud userdata.
                    properties:
                      name:
                        description: 'Name of the referent. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                          TODO: Add other useful fields. apiVersion, kind, uid?'
                        type: string
                    type: object
                  userData:
                    description: UserData contains NoCloud inline cloud-init userdata.
                    type: string
                  userDataBase64:
                    description: UserDataBase64 contains NoCloud cloud-init userdata
                      as a base64 encoded string.
                    type: string
                type: object
              diskAttachments:
                items:
                  description: Represents the source of existing disk
                  properties:
                    bus:
                      description: 'Bus indicates the type of disk device to emulate.
                        supported values: virtio, sata, scsi, usb.'
                      type: string
                    hotpluggable:
                      description: Hotpluggable indicates whether the volume can be
                        hotplugged and hotunplugged.
                      type: boolean
                    name:
                      description: Name represents the name of the Disk in the same
                        namespace
                      type: string
                  required:
                  - name
                  type: object
                type: array
              resources:
                additionalProperties:
                  anyOf:
                  - type: integer
                  - type: string
                  pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                  x-kubernetes-int-or-string: true
                description: ResourceList is a set of (resource name, quantity) pairs.
                type: object
              running:
                type: boolean
              sshPublicKey:
                type: string
              staticIPAddress:
                type: string
              userName:
                type: string
            type: object
          status:
            description: VirtualMachineStatus defines the observed state of VirtualMachine
            properties:
              ipAddress:
                description: IP address of Virtual Machine
                type: string
              nodeName:
                description: NodeName is the name where the VirtualMachineInstance
                  is currently running.
                type: string
              phase:
                description: Phase is a human readable, high-level representation
                  of the status of the virtual machine
                type: string
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}
